<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Jessie dessert</title>
    <link rel="stylesheet" href="./narbar.css">
    <link rel="stylesheet" href="./top.css">
    <!-- <link rel="stylesheet" href="./首頁段落.css"> -->
    <!-- <link rel="stylesheet" href="./輪播圖片.css"> -->
    <!-- <link rel="stylesheet" href="./字體特效.css"> -->
    <link rel="stylesheet" href="./recipe.css">
    <!-- <link rel="stylesheet" href="./shop.css"> -->
    <link rel="stylesheet" href="./coffeeshops.js">
    <link rel="shortcut icon" href="./img/S__135938101.jpg" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Source+Code+Pro&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css" />
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">

</head>
<script>
let links = document.getElementsByTagName("a");

for (let i = 0; i < links.length; i++) {
    links[i].onmouseover = function() {
        this.style.color = "";
    }

    links[i].onmouseout = function() {
        this.style.color = "";
    }
}

</script>

<script>
    function fetchCoffeeShops(complete) {
       let url = 'https://raw.githubusercontent.com/jessie9527/report/main/coffeeshop.json'
       fetch(url)
       .then(function(response) {
           return response.json()
       })
       .then(function(jsonObj) {
           complete(jsonObj['coffeeshops'])
       })
    }
    
    
    function geoLocation(latitude, longitude) {
       let lat = parseFloat(latitude)
       let lng = parseFloat(longitude)
       return { lat: lat, lng: lng }
    }
    
    //不同evaluate換不同顏色
    function getColor(evaluate) {
       let iEvaluate = parseInt(evaluate)
       if (iEvaluate == 10) return '#e9311a'
       if (iEvaluate == 9) return '#ed6335'
       if (iEvaluate == 8) return '#ecae7d'
    }
    
    
    function initMap() {
       const wuri = { lat: 24.1019228, lng: 120.5875407 };
       const map = new google.maps.Map($('#map')[0], {  //$('#map').get(0) = document.getElementById("map")
           zoom: 11,
           center: wuri,
           mapId: '980dd2b7ca13eb61'
       });
    
    
       fetchCoffeeShops(function(coffeeshops) {
        coffeeshops.forEach(function(coffeeshop) {
            const pinViewScaled = new google.maps.marker.PinView({
                scale: 0.9,
                glyph: coffeeshop.evaluate,
                background: getColor(coffeeshop.evaluate),
            });
    
               const marker = new google.maps.marker.AdvancedMarkerView({   //地圖上紅色標記
                //冒號前的都是功能(不能改)後接變數
                   position: geoLocation(coffeeshop.latitude, coffeeshop.longitude),
                   map: map,
                   title: coffeeshop.title,
                   // label: record.aqi,  //這個是舊版
                   content: pinViewScaled.element,
               });
           })
       })
    }
    
    
    window.initMap = initMap;
</script>

<style>
#map {
    height: 550px; 
    width: 80%;
    margin: 0 auto;
}

main h1{
  text-align: center;
  font-family: noto sans tc, 微軟正黑體 ; 
  font-weight: 600;
}

#cardwrap {
      margin:16px;
      display: flex;
      flex-wrap: wrap;
      justify-content:center;
}
  
.card {
      width:400px;
      height:450px;
      align-items:center;
      justify-content :center;
      text-align:center;
      /* background-color: rgb(232, 228, 228); */
      padding: 50px;
      border-radius:12px;
      /* backdrop-filter:blur(100px); */
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
      margin: 20px 0px 35px 50px;
}
  
.card li{
      list-style: none;
      text-align: left;
}

.card a {
    text-decoration:none;
    color: black;
}

.card img {
  max-width: 100%;
  max-height: 210px;
  object-fit: cover;
  border-radius: 5px;
}
  
</style>

<script>
  function f(json) {
      let jsonObj = JSON.parse(json);
      let main = '';
    
      jsonObj['coffeeshops'].forEach(function(coffeeshop) {
        
        let card = `
          <div class="card">
            <a href="${coffeeshop['link']}" class="list">
              <img src="${coffeeshop['image1']}" alt="book"> 
              <br>
              <br>
              <h3>${coffeeshop['title']}</h3>
              <li>營業時間:${coffeeshop['time']}</li>
              <li>電話:${coffeeshop['tel']}</li>
              <li>地址:${coffeeshop['address']}</li>
              <li>低消:${coffeeshop['minimum order']}</li>
            </a>
          </div>
        `;
        
        main += card;
      });
    
      return main;
    }
    
    window.onload = function() {
      fetch('https://raw.githubusercontent.com/jessie9527/report/main/coffeeshop.json')
        .then(function(response) {
          return response.text();
        })
        .then(function(text) {
          let main = f(text);
          document.getElementById('cardwrap').innerHTML = main;
        });
    };
  </script>
  

<body>
    <div class="shortcut">
      <div class="wrapper">
        <ul>
          <li><div class="search">
            <span class="uil uil-search"></span>
            <input placeholder="Search" type="text" />
          </div>
          </li>
          <li><a href="#"><i></i>購物車</a></li>
          <li><a href="./註冊/login.html"><b></b>登入/註冊</a></li>
          <li><a href="https://m.me/100063918344483" target="_blank"><u></u>聯絡我們</a></li>
        </ul>
        
      </div>
    </div>
    <br>
    <div style="text-align: center; display: flex; align-items: center; margin: -10px 40px;" class="top" >
      <img src="./img/S__135938101 1 (1) 1.png" alt="logo" style="width: 100px ; height: 100px; ">  
    <nav class="navBar">
        <div>
            <ul>
                <li><a href="./首頁.html">品牌故事</a></li>
                <li><a href="#">線上訂購</a></li>
                <li class="dropdown">
                  <!-- <a class="nav-link dropdown-toggle" href="./食譜分享.html" role="button" data-bs-toggle="dropdown" aria-expanded="false"> -->
                  <a  href="./食譜分享.html">
                    食譜分享</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="./recipe/mille.html">巧克力千層蛋糕</a></li>
                    <li><a class="dropdown-item" href="./recipe/Basque.html">巴斯克乳酪蛋糕</a></li>
                    <li><a class="dropdown-item" href="./recipe/Tiramisu.html">提拉米蘇</a></li>
                    <li><a class="dropdown-item" href="./recipe/taro.html">芋頭酥</a></li>
                  </ul>
                </li>
                <li><a href="#">咖啡廳推薦</a></li>
                <li><a href="./購物須知.html">購物須知</a></li>
            </ul>
        </div>
    </nav>
    </div> 
    <br>
    <div>
      <div class="recipe">
        <div class="shadow">
          <div class="text">coffee shop</div>
        </div>
      </div>
      <main>
        <h1>台中彰化咖啡廳推薦</h1>
        <div class="cardwrap" id="cardwrap">
        </div>
        <br>
        <div id="map"></div>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDEQ4Rf5sExPchgOPBZVeyhIVs1IVwagUw&callback=initMap&v=beta&libraries=marker" defer></script>
      </main>
    </div>

    <br>
    <div class="footer">
      <div class="wrapper">
          <div class="info">┃網路訂單客服┃
            <p>服務時間：週一~週五 9:00-18:00 <br>
              客服專線：04-1234567 <br>
              客服信箱：jessiedessert123@gmail.com</p>
          </div>
          <div class="media">FOLLOW US <br><br>
            <a href="#" ><img src="./img/iconmonstr-facebook-5-32.png" alt="fb" class="fb"></a>
            <a href="https://instagram.com/jessie_dessert?igshid=YmMyMTA2M2Y=" target="_blank"><img src="./img/iconmonstr-instagram-15-32.png" alt="ig" class="ig"></a>
            <a href="#" ><img src="./img/iconmonstr-phone-9-32 (1).png" alt="phone" class="phone"></a>
            <a href="#" ><img src="./img/iconmonstr-line-5-32.png" alt="line" class="line"></a>
          </div>
      </div>
      <div class="copyright">
        Copyright 2023 © jessie_dessert
      </div>
    </div>

</body>
</html>